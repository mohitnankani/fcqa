{"version":3,"file":"job-type.js","sources":["../../dependency-sets/job-type/helpers/ssJobTypeHlp/job-type.js"],"sourcesContent":["function ssJobTypeHlp(ssDateHlp, ssDateByOrgHlp, moment, ssEffectiveDateHlp) {\r\n\r\n\treturn {\r\n\t// #--------------------------------# //\r\n\t// #---- Helper (jobTypeHlp) ----# //\r\n\t\tisValidPS,\r\n\t\tisValidJTD,\r\n\t\tgetJobTypeById,\r\n\t\tgetJobTypeDetail,\r\n\t\tgetPaySchedule\r\n\t// #-- END Helper (jobTypeHlp) --# //\r\n\t// #--------------------------------# //\r\n\t};\r\n\r\n\r\n\r\n\tfunction isValidPS(ps) {\r\n\t\tvar fromDate = _val(ps, 'fromDateUtc');\r\n\t\treturn !ssDateHlp.isForeverPast(fromDate);\r\n\t}\r\n\tfunction isValidJTD(jtd) {\r\n\t\treturn !ssDateHlp.isForeverPast( jtd._fromDateUtc) ||\r\n\t\t\t\t\t\t(jtd._fTE !== 0 ||\r\n\t\t\t\t\t\tjtd._hoursPerDay !== 0 ||\r\n\t\t\t\t\t\tjtd._workDaysPerYear !== 0 ||\r\n\t\t\t\t\t\tjtd._payPeriodsPerYear !== 0 ||\r\n\t\t\t\t\t\tjtd._paidHolidaysPerSchoolYear !== 0 ||\r\n\t\t\t\t\t\tjtd._sickDaysPerSchoolYear !== 0 ||\r\n\t\t\t\t\t\tjtd._personalDaysPerSchoolYear !== 0 ||\r\n\t\t\t\t\t\tjtd._vacationDaysPerSchoolYear !== 0);\r\n\t\t}\r\n\r\n\r\n\tfunction validPSs({ paySchedules }) {\r\n\t\treturn paySchedules.filter(isValidPS);\r\n\t}\r\n\tfunction validJTDs({ jobTypeDetails }) {\r\n\t\treturn jobTypeDetails.filter(isValidJTD);\r\n\t}\r\n\r\n\tfunction getJobTypeById({ jobTypes, id }) {\r\n\t\tconst jobType = jobTypes.find(x => x.id === id);\r\n\t\tif(!jobType) { return null; }\r\n\t\treturn Object.assign({}, jobType);\r\n\t}\r\n\r\n\tfunction getJobTypeDetail({ startDate, endDate, jobType, org }) {\r\n\t\tconst _validJTDs = validJTDs({ jobTypeDetails : jobType._jobTypeDetails });\r\n\t\tconst jtd = _getDetail(_validJTDs, startDate, endDate, org);;\r\n\t\tif(!jtd) { return jobType._jobTypeDetails[0]; }\r\n\t\treturn  Object.assign({}, jtd);\r\n\t}\r\n\r\n\tfunction getPaySchedule({ startDate, endDate, jobType, org }) {\r\n\t\tconst _validPSs = validPSs({ paySchedules: jobType._paySchedules });\r\n\t\tconst ps = _getDetail(_validPSs, startDate, endDate, org);\r\n\t\tif(!ps){ return jobType._paySchedules[0]; }\r\n\t\treturn  Object.assign({}, ps);\r\n\t}\r\n\r\n\t/* Private Functions */\r\n\tfunction _getDetail(_list, startDate, endDate, org) {\r\n\t\tvar list = _list.filter(function(x){\r\n\t\t\treturn (new Date(x._fromDateUtc) <= new Date(endDate) && new Date(startDate) <= new Date(x._toDateUtc));\r\n\t\t});\r\n\t\tconst obj = { _fromDateUtc: startDate, _toDateUtc: endDate };\r\n\t\tconst isFuture = ssDateByOrgHlp.isInFuture({ obj, org });\r\n\t\tconst isPast = ssDateByOrgHlp.isInPast({ obj, org });\r\n\t\tlet asOfDate = null;\r\n\t\tif(isFuture){\r\n\t\t\tasOfDate = startDate;\r\n\t\t}else if(isPast){\r\n\t\t\tasOfDate = endDate;\r\n\t\t}else{\r\n\t\t\tasOfDate = null;\r\n\t\t}\r\n\t\treturn list.find(item => ssDateByOrgHlp.isCurrent({ obj: item, asOfDate, org }));\r\n\t}\r\n\r\n\r\n}\r\n\r\n\r\nfunction _val(model, prop) {\r\n\tif (model.hasOwnProperty(prop)) { return model[prop]; }\r\n\tif (model.hasOwnProperty(`_${prop}`)) { return model[`_${prop}`]; }\r\n\telse { return; }\r\n}\r\n\r\nangular.module('super-suit-helpers').factory('ssJobTypeHlp', ssJobTypeHlp);\r\n"],"names":["ssJobTypeHlp","ssDateHlp","ssDateByOrgHlp","isValidPS","ps","fromDate","_val","isForeverPast","isValidJTD","jtd","_fromDateUtc","_fTE","_hoursPerDay","_workDaysPerYear","_payPeriodsPerYear","_paidHolidaysPerSchoolYear","_sickDaysPerSchoolYear","_personalDaysPerSchoolYear","_vacationDaysPerSchoolYear","validPSs","paySchedules","filter","validJTDs","jobTypeDetails","_getDetail","_list","startDate","endDate","org","list","x","Date","_toDateUtc","obj","isFuture","isInFuture","isPast","isInPast","asOfDate","find","isCurrent","item","jobTypes","id","jobType","Object","assign","_validJTDs","_jobTypeDetails","_validPSs","_paySchedules","model","prop","hasOwnProperty","angular","module","factory"],"mappings":"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"}