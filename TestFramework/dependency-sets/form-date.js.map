{"version":3,"file":"form-date.js","sources":["../../dependency-sets/form-date/helpers/ssDueDateHlp/due-date.js"],"sourcesContent":["// #-------------------------------# //\r\n// #---- Helper (ssDueDateHlp) ----# //\r\n\r\n/*@ngInject*/\r\nfunction ssDueDateHlp(ssDateHlp, ssDateByOrgHlp) {\r\n\r\n\t//\tis it past the due date for the form?\r\n    function isOverdue(obj, org) {\r\n        return daysTillDue(obj, org) < 0;\r\n    };\r\n\r\n//\tuser-friendly display of the due date\r\n    function dueStatus(obj, org) {\r\n\r\n        let dueInDays = daysTillDue(obj, org);\r\n\r\n        if(dueInDays < 0 && !obj.isComplete) {\r\n            let daysOverdue = dueInDays * -1;\r\n            let s = daysOverdue > 1 ? 's' : '';\r\n            return {\r\n                class: 'overdue',\r\n                statusFriendly: `${daysOverdue} day${s} overdue`,\r\n            };\r\n        } else if(dueInDays === 0) {\r\n            return {\r\n                class: 'due-soon',\r\n                statusFriendly: 'due today'\r\n            };\r\n        } else if (dueInDays > 0 && dueInDays <= 3) {\r\n            let s = dueInDays > 1 ? 's' : '';\r\n            return {\r\n                class: 'due-soon',\r\n                statusFriendly: `due in ${dueInDays} day${s}`\r\n            };\r\n        } else if(dueInDays > 3) {\r\n           return {\r\n                class: '',\r\n                statusFriendly: `due ${ssDateByOrgHlp.utcIsoToRelativeMoment(obj._dueDateUtc, org).format('M/D/YY')}`\r\n           };\r\n        } else {\r\n            return null;\r\n        }\r\n\r\n    }\r\n\r\n    //\thelper functions\r\n    function difference(start, end) {\r\n        var diff = end.diff(start, 'days', true);\r\n        return Math.floor(diff);\r\n    }\r\n\r\n    function daysTillDue(obj, org) {\r\n        if (obj._dueDateUtc == null) { return ssDateHlp.foreverFuture(); }\r\n        var start = ssDateByOrgHlp.safeNowRelativeTo(org).startOf('day');\r\n        var end = ssDateByOrgHlp.utcIsoToRelativeMoment(obj._dueDateUtc, org);\r\n        return difference(start, end);\r\n    };\r\n\r\n    return {\r\n        dueStatus,\r\n        isOverdue\r\n    };\r\n\r\n};\r\n// #-- END Helper (ssDueDateHlp) --# //\r\n// #-------------------------------# //\r\n\r\nangular.module('super-suit-helpers').factory('ssDueDateHlp', ssDueDateHlp);\r\n"],"names":["ssDueDateHlp","ssDateHlp","ssDateByOrgHlp","difference","start","end","diff","Math","floor","daysTillDue","obj","org","_dueDateUtc","foreverFuture","safeNowRelativeTo","startOf","utcIsoToRelativeMoment","dueInDays","isComplete","daysOverdue","s","format","angular","module","factory"],"mappings":"yBAAA;AACA;AAEA,aACA,QAASA,EAAT,CAAsBC,CAAtB,CAAiCC,CAAjC,CAAiD;;QA0CpCC,GAAWC,EAAOC,EAAK,IACxBC,GAAOD,EAAIC,IAAJD,CAASD,CAATC,CAAgB,MAAhBA,WACJE,MAAKC,KAALD,CAAWD,CAAXC;QAGFE,GAAYC,EAAKC,EAAK,IACJ,IAAnBD,IAAIE,kBAA8BX,GAAUY,aAAVZ,GADX,GAEvBG,GAAQF,EAAeY,iBAAfZ,CAAiCS,CAAjCT,EAAsCa,OAAtCb,CAA8C,KAA9CA,CAFe,CAGvBG,EAAMH,EAAec,sBAAfd,CAAsCQ,EAAIE,WAA1CV,CAAuDS,CAAvDT,CAHiB,OAIpBC,GAAWC,CAAXD,CAAkBE,CAAlBF,QAGJ,oBA9CYO,EAAKC,EAAK,IAErBM,GAAYR,EAAYC,CAAZD,CAAiBE,CAAjBF,KAED,CAAZQ,IAAiB,CAACP,EAAIQ,WAAY,IAC7BC,GAA0B,CAAC,CAAbF,EADe,CAE7BG,EAAkB,CAAdD,GAAkB,GAAlBA,CAAwB,EAFC,OAG1B,OACI,SADJ,gBAEgBA,QAAAA,CAAkBC,CAAlBD,WAFhB,CAHX,CAOO,GAAiB,CAAdF,IAAH,OACI,OACI,UADJ,gBAEa,WAFb,EAIJ,GAAgB,CAAZA,IAA8B,CAAbA,GAArB,CAAqC,IACpCG,GAAgB,CAAZH,GAAgB,GAAhBA,CAAsB,SACvB,OACI,UADJ,0BAEuBA,SAAgBG,CAFvC,CAFJ,CAhBkB,MAsBH,EAAZH,EAtBe,CAuBf,OACK,EADL,uBAEqBf,EAAec,sBAAfd,CAAsCQ,EAAIE,WAA1CV,CAAuDS,CAAvDT,EAA4DmB,MAA5DnB,CAAmE,QAAnEA,CAFrB,CAvBe,CA4Bd,KAkBR,oBAnDYQ,EAAKC,EAAK,OACM,EAAxBF,GAAYC,CAAZD,CAAiBE,CAAjBF,EAkDJ;AAOX;yCAEAa,QAAQC,MAARD,CAAe,oBAAfA,EAAqCE,OAArCF,CAA6C,cAA7CA,CAA6DtB,CAA7DsB"}